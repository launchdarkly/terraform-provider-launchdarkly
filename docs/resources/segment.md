---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "launchdarkly_segment Resource - launchdarkly"
subcategory: ""
description: |-
  Provides a LaunchDarkly segment resource.
  This resource allows you to create and manage segments within your LaunchDarkly organization.
---

# launchdarkly_segment (Resource)

Provides a LaunchDarkly segment resource.

This resource allows you to create and manage segments within your LaunchDarkly organization.

## Example Usage

```terraform
# This example shows the use of tags, targets, context targets, and rules for a segment
resource "launchdarkly_segment" "example" {
  key         = "example-segment-key"
  project_key = launchdarkly_project.example.key
  env_key     = launchdarkly_environment.example.key
  name        = "example segment"
  description = "This segment is managed by Terraform"
  tags        = ["segment-tag-1", "segment-tag-2"]
  included    = ["user1", "user2"]
  excluded    = ["user3", "user4"]
  included_contexts {
    values       = ["account1", "account2"]
    context_kind = "account"
  }

  rules {
    clauses {
      attribute    = "country"
      op           = "startsWith"
      values       = ["en", "de", "un"]
      negate       = false
      context_kind = "location-data"
    }
  }
}

# This example shows a segment configured to have an unbounded number of individual targets
resource "launchdarkly_segment" "big-example" {
  key                    = "example-big-segment-key"
  project_key            = launchdarkly_project.example.key
  env_key                = launchdarkly_environment.example.key
  name                   = "example big segment"
  description            = "This big segment is managed by Terraform"
  tags                   = ["segment-tag-1", "segment-tag-2"]
  unbounded              = true
  unbounded_context_kind = "user"
}

# This example shows a segment with a targeting rule that uses all clause operators
resource "launchdarkly_segment" "segment_with_all_clause_operators" {
  name        = "Segment with all clause operators"
  key         = "segment-operators"
  project_key = "projectx"
  env_key     = "development"

  rules {
    clauses {
      attribute = "username"
      op        = "in" // Maps to 'is one of' in the UI
      values    = ["henrietta powell", "wally waterbear"]
    }
    clauses {
      attribute = "username"
      op        = "endsWith" // Maps to 'ends with' in the UI
      values    = ["powell", "waterbear"]
    }
    clauses {
      attribute = "username"
      op        = "startsWith" // Maps to 'starts with' in the UI
      values    = ["henrietta", "wally"]
    }
    clauses {
      attribute = "username"
      op        = "matches" // Maps to 'matches regex' in the UI
      values    = ["henr*"]
    }
    clauses {
      attribute = "username"
      op        = "contains" // Maps to 'contains' in the UI
      values    = ["water"]
    }
    clauses {
      attribute = "pageVisits"
      op        = "lessThan" // Maps to 'less than (<)' in the UI
      values    = [100]
    }
    clauses {
      attribute = "pageVisits"
      op        = "lessThanOrEqual" // Maps to 'less than or equal to (<=)' in the UI
      values    = [100]
    }
    clauses {
      attribute = "pageVisits"
      op        = "greaterThan" // Maps to 'greater than (>)' in the UI
      values    = [100]
    }
    clauses {
      attribute = "pageVisits"
      op        = "greaterThanOrEqual" // Maps to 'greater than or equal to (>=)' in the UI
      values    = [100]
    }
    clauses {
      attribute = "creationDate"
      op        = "before" // Maps to 'before' in the UI
      values    = ["2024-05-03T15:57:30Z"]
    }
    clauses {
      attribute = "creationDate"
      op        = "after" // Maps to 'after' in the UI
      values    = ["2024-05-03T15:57:30Z"]
    }
    clauses {
      attribute    = "version"
      op           = "semVerEqual" // Maps to 'semantic version is one of (=)' in the UI
      values       = ["1.0.0", "1.0.1"]
      context_kind = "application"
    }
    clauses {
      attribute    = "version"
      op           = "semVerLessThan" // Maps to 'semantic version less than (<)' in the UI
      values       = ["1.0.0"]
      context_kind = "application"
    }
    clauses {
      attribute    = "version"
      op           = "semVerGreaterThan" // Maps to 'semantic version greater than (>)' in the UI
      values       = ["1.0.0"]
      context_kind = "application"
    }
    clauses {
      attribute = "context"
      op        = "segmentMatch" // Maps to 'Context is in' in the UI
      values    = ["test-segment"]
    }
  }
}

# Example: Segment with view associations
# This approach is ideal for modular Terraform where each segment is managed in its own file
resource "launchdarkly_segment" "premium_users" {
  key         = "premium-users"
  project_key = "example-project"
  env_key     = "production"
  name        = "Premium Users"
  description = "Users with premium subscriptions"

  # Link this segment to specific views
  # The segment will appear in both the "sales-team" and "customer-success" views
  view_keys = [
    "sales-team",
    "customer-success"
  ]

  tags = ["premium", "subscription"]

  rules {
    clauses {
      attribute = "plan"
      op        = "in"
      values    = ["premium", "enterprise"]
    }
  }
}

# Example: Segment managed in a module that can specify its own views
# This enables a modular structure where each team/domain can manage their segments
# without needing to coordinate with a central view_links resource
resource "launchdarkly_segment" "beta_testers" {
  key         = "beta-testers"
  project_key = "example-project"
  env_key     = "staging"
  name        = "Beta Testers"

  # Each segment can independently specify which views it belongs to
  view_keys = ["product-team"]

  tags = ["beta", "testing"]

  included = ["user123", "user456"]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `env_key` (String) The segment's environment key. A change in this field will force the destruction of the existing resource and the creation of a new one.
- `key` (String) The unique key that references the segment. A change in this field will force the destruction of the existing resource and the creation of a new one.
- `name` (String) The human-friendly name for the segment.
- `project_key` (String) The segment's project key. A change in this field will force the destruction of the existing resource and the creation of a new one.

### Optional

- `description` (String) The description of the segment's purpose.
- `excluded` (List of String) List of user keys excluded from the segment. To target on other context kinds, use the excluded_contexts block attribute. This attribute is not valid when `unbounded` is set to `true`.
- `excluded_contexts` (Block List) List of non-user target objects excluded from the segment. This attribute is not valid when `unbounded` is set to `true`. (see [below for nested schema](#nestedblock--excluded_contexts))
- `included` (List of String) List of user keys included in the segment. To target on other context kinds, use the included_contexts block attribute. This attribute is not valid when `unbounded` is set to `true`.
- `included_contexts` (Block List) List of non-user target objects included in the segment. This attribute is not valid when `unbounded` is set to `true`. (see [below for nested schema](#nestedblock--included_contexts))
- `rules` (Block List) List of nested custom rule blocks to apply to the segment. This attribute is not valid when `unbounded` is set to `true`. (see [below for nested schema](#nestedblock--rules))
- `tags` (Set of String) Tags associated with your resource.
- `unbounded` (Boolean) Whether to create a standard segment (`false`) or a Big Segment (`true`). Standard segments include rule-based and smaller list-based segments. Big Segments include larger list-based segments and synced segments. Only use a Big Segment if you need to add more than 15,000 individual targets. It is not possible to manage the list of targeted contexts for Big Segments with Terraform. A change in this field will force the destruction of the existing resource and the creation of a new one.
- `unbounded_context_kind` (String) For Big Segments, the targeted context kind. If this attribute is not specified it will default to `user`. A change in this field will force the destruction of the existing resource and the creation of a new one.
- `view_keys` (Set of String) A set of view keys to link this segment to. This is an alternative to using the `launchdarkly_view_links` resource for managing view associations. When set, this segment will be linked to the specified views. Note: Using both `view_keys` on the segment and `launchdarkly_view_links` to manage the same segment may cause conflicts.

### Read-Only

- `creation_date` (Number) The segment's creation date represented as a UNIX epoch timestamp.
- `id` (String) The ID of this resource.
- `linked_views` (Set of String) A computed set of all view keys this segment is currently linked to, regardless of how the associations were created (via `view_keys` or `launchdarkly_view_links`).

<a id="nestedblock--excluded_contexts"></a>
### Nested Schema for `excluded_contexts`

Required:

- `context_kind` (String) The context kind associated with this segment target. To target on user contexts, use the included and excluded attributes.
- `values` (List of String) List of target object keys included in or excluded from the segment.


<a id="nestedblock--included_contexts"></a>
### Nested Schema for `included_contexts`

Required:

- `context_kind` (String) The context kind associated with this segment target. To target on user contexts, use the included and excluded attributes.
- `values` (List of String) List of target object keys included in or excluded from the segment.


<a id="nestedblock--rules"></a>
### Nested Schema for `rules`

Optional:

- `bucket_by` (String) The attribute by which to group contexts together.
- `clauses` (Block List) List of nested blocks specifying the logical clauses to evaluate (see [below for nested schema](#nestedblock--rules--clauses))
- `rollout_context_kind` (String) The context kind associated with this segment rule. This argument is only valid if `weight` is also specified. If omitted, defaults to `user`.
- `weight` (Number) The integer weight of the rule (between 1 and 100000).

<a id="nestedblock--rules--clauses"></a>
### Nested Schema for `rules.clauses`

Required:

- `attribute` (String) The user attribute to operate on
- `op` (String) The operator associated with the rule clause. Available options are `in`, `endsWith`, `startsWith`, `matches`, `contains`, `lessThan`, `lessThanOrEqual`, `greaterThanOrEqual`, `before`, `after`, `segmentMatch`, `semVerEqual`, `semVerLessThan`, and `semVerGreaterThan`. Read LaunchDarkly's [Operators](https://docs.launchdarkly.com/sdk/concepts/flag-evaluation-rules#operators) documentation for more information.
- `values` (List of String) The list of values associated with the rule clause.

Optional:

- `context_kind` (String) The context kind associated with this rule clause. If omitted, defaults to `user`.
- `negate` (Boolean) Whether to negate the rule clause.
- `value_type` (String) The type for each of the clause's values. Available types are `boolean`, `string`, and `number`. If omitted, `value_type` defaults to `string`.

## Import

Import is supported using the following syntax:

```shell
#LaunchDarkly segments can be imported using the segment's ID in the form `project_key/env_key/segment_key`
terraform import launchdarkly_segment.example example-project/example-environment/example-segment-key
```
